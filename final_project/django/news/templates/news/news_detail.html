{% extends 'base.html' %}

{% block content %}


<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card text-center">
                <div class="card-header">
                    <h2>{{ article.title }}</h2>
                </div>
                
                <div class="card-body">
                    <div class="card-text"><strong>Date:</strong> {{ article.article_public_Date|slice:"5:10" }}</div>
                    <div class="row-mt-5">
                        <strong>Category:</strong> {{ article.category }}
                    </div>
                    
                    <div class="row mt-5">
                        Comments({{ article.comment_set.count}}) | Bookmarked({{ article.bookmark_set.count }})
                    </div>
                    
                    {% if request.user.is_authenticated %}
                        <p>
                            <h3><strong>Abstract</strong></h3>
                        </p>
                        <div class="card-text mb-5">
                            {{ article.abstract }}
                        </div>
                        <hr class="my-2">

                        <p>
                            <h3><strong>Content</strong></h3>
                        </p>
                        <div class="card-text mb-5">
                            {{ article.content}}
                        </div>
                        <hr class="my-2">

                        <div class="card-text mb-5">
                            <a href="{{ article.content_url }}" target="_blank"> <stong>Want to see the original text? Click the url!</stong></a>
                        </div>
                    

                    {% else %}
                        <div class="card-text mb-5">
                            {{ article.content }}
                        </div>
                        <hr class="my-2">

                        <div class="card-text mb-5">
                            <a href="{{ article.content_url }}" target="_blank"> ÏõêÎ¨∏ url </a>
                        </div>
                    {% endif %}


                    <!--  Î°úÍ∑∏Ïù∏ Ìïú ÌöåÏõêÎßå Î∂ÅÎßàÌÅ¨, ÎåìÍ∏Ä, ÌèâÏ†ê Í∏∞Îä• ÏÇ¨Ïö© Í∞ÄÎä•-->
                    {% if request.user.is_authenticated %}
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <!-- Î∂ÅÎßàÌÅ¨ Í∏∞Îä• -->
                                <!-- ÎßåÏïΩ ÏÇ¨Ïö©ÏûêÍ∞Ä Ïù∏Ï¶ùÎêòÏóàÎã§Î©¥, Î∂ÅÎßàÌÅ¨ Î≤ÑÌäº ÎÇòÏò¥ -->
                                <div>
                                    <form action="{% url "news:news_bookmarked" article.pk %}" method="POST">
                                        {% csrf_token %}
                                        <button type="submit" name="bookmark_action">
                                            {% if is_bookmark %}
                                                ‚ù§Ô∏è Unbookmark
                                            {% else %}
                                                ü§ç Bookmark
                                            {% endif %}
                                        </button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div>
                                    <!-- ÌèâÏ†ê Í∏∞Îä• -->
                                    <form action="{% url "news:news_rating" article.pk %}" method="POST">
                                        {% csrf_token %}
                                        {{ rating_form }}
                                        <button type="submit" class="btn btn-secondary btn-sm">ÌèâÏ†ê Îã¨Í∏∞</button>
                                    </form>
                                </div>
                            </div>

                        </div>
                    {% endif %}

                        <div>
                            <!-- ÎåìÍ∏Ä Ï∞Ω Î∞è Í∏∞Îä•-->
                            {% include "news/comment.html" %}
                        </div>

                </div>    
            </div>
        </div>
    </div>


{% endblock content %}
